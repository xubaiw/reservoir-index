<html>
<head>
<meta charset="utf-8"></meta><title>leanprover/vscode-lean4</title>
<link rel="stylesheet" href="./static/style.css"></link></head>
<body>
<header>
<h1>
<a href="./">Reservoir</a>
</h1>
<input placeholder="Text in here to navigate!"></input><ul>
<li>
<a href="#">About</a>
</li>
<li>
<a href="#">New</a>
</li>
<li>
<a href="#">Trending</a>
</li>
</ul>
</header>
<main>
<h1>leanprover/vscode-lean4</h1>
<p>Visual Studio Code extension for the Lean 4 proof assistant</p>
<a href="https://github.com/leanprover/vscode-lean4">GitHub Link</a>
<a href="#" title="Missing now!">Documentation</a>
<h2>Pick a version!</h2>
<p>TODO: should show a time axes that allows the users to view, filter and click copy the lakefile config.</p>
<h2>README</h2>
<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><h1 dir="auto"><a id="user-content-lean-4-vscode-extension" class="anchor" aria-hidden="true" href="#lean-4-vscode-extension"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lean 4 VSCode Extension</h1>
<p dir="auto">This extension provides VSCode editor support for the Lean 4 programming language. It uses the
all new <a href="https://docs.microsoft.com/en-us/visualstudio/extensibility/language-server-protocol" rel="nofollow">Language Server</a>
implemented in Lean.</p>
<p dir="auto">See <a href="https://www.youtube.com/watch?v=yZo6k48L0VY" rel="nofollow">Quick Start Demo Video</a>.</p>
<h2 dir="auto"><a id="user-content-installing-the-extension-and-lean-4" class="anchor" aria-hidden="true" href="#installing-the-extension-and-lean-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing the extension and Lean 4</h2>
<ol dir="auto">
<li>
<p dir="auto">Install the extension from the <a href="https://marketplace.visualstudio.com/items?itemName=leanprover.lean4" rel="nofollow">marketplace</a>.</p>
</li>
<li>
<p dir="auto">Create a new folder called <code>foo</code> and add a file named <code>hello.lean</code>
containing the following:</p>
<div class="highlight highlight-source-lean notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="import Lake
#eval Lake.leanVersionString"><pre><span class="pl-k">import</span> Lake
<span class="pl-k">#eval</span> Lake.leanVersionString</pre></div>
</li>
<li>
<p dir="auto">Open this folder in VS Code using <code>File/Open Folder</code>.</p>
</li>
<li>
<p dir="auto">Open your file <code>hello.lean</code>.</p>
</li>
<li>
<p dir="auto">If <code>Lean</code> is not yet installed on your system you will see a prompt like this:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/install-elan.png"><img src="vscode-lean4/media/install-elan.png" alt="prompt" style="max-width: 100%;"></a></p>
</li>
<li>
<p dir="auto">Click the <code>Install Lean using Elan</code> option and enter any default options that appear in the terminal window.</p>
</li>
<li>
<p dir="auto">After this succeeds the correct version of Lean will be installed by <code>elan</code>
and you should see something like this in the <code>Lean: Editor</code> output panel:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="info: downloading component 'lean'
info: installing component 'lean'
Lean (version 4.0.0-nightly-2021-10-18, commit e843fb7ca5b5, Release)"><pre class="notranslate"><code>info: downloading component 'lean'
info: installing component 'lean'
Lean (version 4.0.0-nightly-2021-10-18, commit e843fb7ca5b5, Release)
</code></pre></div>
</li>
</ol>
<p dir="auto">See <a href="#complete_setup">Complete Setup</a> for more information
on how the lean version is determined for your VS Code workspace.</p>
<p dir="auto">This version of the VS Code extension only works on Lean 4 source files and not
Lean 3.  There is a separate VS Code extension for Lean 3.  You can have both extensions installed at the same time, they can live side by side.</p>
<h2 dir="auto"><a id="user-content-lake-integration" class="anchor" aria-hidden="true" href="#lake-integration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lake integration</h2>
<p dir="auto">Note that once the Lean toolchain is installed you can also turn your folder into a <a href="https://github.com/leanprover/lake/blob/master/README.md">Lake</a> project.  Lake is a build system
for Lean projects.  The VS code extension will honor the Lean version specified in your <code>lean-toolchain</code> file.</p>
<p dir="auto">Open a VS Code Terminal window in your <code>foo</code> folder and type the following:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="lake init foo
lake build"><pre class="notranslate"><code>lake init foo
lake build
</code></pre></div>
<p dir="auto">This will add some package definition files to your project along with a <code>Main.lean</code> entry point and build an executable
program.  You can run the program <code>./build/bin/foo</code> and you will see the expected output:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Hello, world!"><pre class="notranslate"><code>Hello, world!
</code></pre></div>
<h2 dir="auto"><a id="user-content-features" class="anchor" aria-hidden="true" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<p dir="auto">The extension supports the following features.
For basic VS Code editor features, see the <a href="https://code.visualstudio.com/docs/getstarted/userinterface" rel="nofollow">VS Code User Interface docs</a>.</p>
<p dir="auto">The extension provides:</p>
<ul dir="auto">
<li>A set of handy <code>Lean4:</code> commands available with <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd></li>
<li>Side-by-side compatibility with the <a href="https://github.com/leanprover/vscode-lean">Lean 3 VSCode extension</a></li>
<li>Nice integration with the Lean <a href="https://docs.microsoft.com/en-us/visualstudio/extensibility/language-server-protocol" rel="nofollow">Language Server</a> as shown below.</li>
<li>An Infoview panel showing interactive information about your Lean programs.</li>
</ul>
<h2 dir="auto"><a id="user-content-lean-language-server-features" class="anchor" aria-hidden="true" href="#lean-language-server-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lean language server features</h2>
<ul dir="auto">
<li>
<p dir="auto">Automatic installation of Lean using <a href="https://github.com/leanprover/elan">elan</a>.</p>
</li>
<li>
<p dir="auto">Incremental compilation and checking via the Lean server (*)</p>
</li>
<li>
<p dir="auto">Type information &amp; documentation on hover</p>
</li>
<li>
<p dir="auto">Error messages and diagnostics</p>
</li>
<li>
<p dir="auto">Syntax highlighting with basic Lean 4 syntax rules</p>
</li>
<li>
<p dir="auto">Semantic highlighting</p>
</li>
<li>
<p dir="auto">Hover shows documentation, types:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/hover-example.png"><img src="vscode-lean4/media/hover-example.png" alt="hover_example" style="max-width: 100%;"></a></p>
</li>
<li>
<p dir="auto">Auto-completion drop downs based on context and type via the Lean Server.
For example, if you type "." after <code>Array</code> you will get:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/completion-example.png"><img src="vscode-lean4/media/completion-example.png" alt="completion-example" style="max-width: 100%;"></a></p>
</li>
<li>
<p dir="auto">An Infoview displaying useful information about your current Lean program.</p>
</li>
<li>
<p dir="auto">Goto definition (F12) will work if the Lean source code is available.  A standard elan install of
the Lean toolchain provides Lean source code for all the Lean standard library, so you can go to
the definition of any standard library symbol which is very useful when you want to learn more
about how the library works. Note also that currently goto definition does not work if the cursor
is at the very end of a symbol like <code>Array.append|</code>.  Move the cursor one character to the left
<code>Array.appen|d</code> and it will work.  See <a href="https://github.com/leanprover/lean4/issues/767" data-hovercard-type="issue" data-hovercard-url="/leanprover/lean4/issues/767/hovercard">open issue #767</a>.</p>
</li>
<li>
<p dir="auto"><a href="https://code.visualstudio.com/Docs/editor/editingevolved#_breadcrumbs" rel="nofollow">Breadcrumbs</a></p>
</li>
</ul>
<p dir="auto">(*) Incremental updates do not yet work automatically across files, so after changing and rebuilding the dependency of a
Lean 4 file, the language server needs to be manually informed that it should re-elaborate the full file, including the
imports. This can be done using the <code>Lean 4: Refresh File Dependencies</code> command, which can be activated via <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>X</kbd>.</p>
<h2 dir="auto"><a id="user-content-lean-editing-features" class="anchor" aria-hidden="true" href="#lean-editing-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lean editing features</h2>
<ul dir="auto">
<li>Support for completing abbreviations starting with a backslash (\).
For example you type <code>\alpha</code> and the editor automatically replaces that with the nice Unicode character <code>α</code>.
You can disable this feature using the <code>lean4.input.enabled</code> setting, see below.</li>
<li>When you hover the mouse over a letter that has one or more abbreviations you will see a tooltip like this:
<a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/abbreviation_tips.png"><img src="vscode-lean4/media/abbreviation_tips.png" alt="abbreviation tip" style="max-width: 100%;"></a></li>
<li>Auto-completing of brackets like <code>()</code>, <code>{}</code>, <code>[]</code>, <code>⟦ ⟧</code>, <code>⦃ ⦄</code>, <code>⟮ ⟯</code>, <code>⦃ ⦄</code> and block comments <code>/- ... -/</code>.</li>
</ul>
<h2 dir="auto"><a id="user-content-infoview-panel" class="anchor" aria-hidden="true" href="#infoview-panel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Infoview panel</h2>
<p dir="auto">The Infoview panel is essential to working interactively with Lean. It shows:</p>
<ul dir="auto">
<li><strong>Tactic state widgets</strong>, with context information (hypotheses, goals) at each point in a proof / definition,</li>
<li><strong>Expected type</strong> widgets display the context for subterms.</li>
<li><strong>Types</strong> of sub-terms in the context can be inspected interactively using mouse hover.</li>
<li><strong>All Messages</strong> widget, which shows all info, warning, and error messages from the Lean server for the current file.</li>
</ul>
<p dir="auto">Suppose you have the following theorem:</p>
<div class="highlight highlight-source-lean notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="theorem test (p q : Prop) (hp : p) (hq : q) : p ∧ q ∧ p :=
  by apply And.intro
     exact hp
     apply And.intro
     exact hq
     exact hp"><pre><span class="pl-k">theorem</span> <span class="pl-en">test</span> (p q : <span class="pl-k">Prop</span>) (hp : p) (hq : q) : p ∧ q ∧ p :=
  <span class="pl-k">by</span> apply And.intro
     exact hp
     apply And.intro
     exact hq
     exact hp</pre></div>
<p dir="auto">and you place the cursor at the end of the line <code>by apply And.intro</code> the Infoview will display the following information:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/infoview-overview.png"><img src="vscode-lean4/media/infoview-overview.png" alt="completion-example" style="max-width: 100%;"></a></p>
<p dir="auto">(1). The Infoview will activate automatically when a Lean file is opened, but you can also reopen it any time using the icon in the top right of the text editor window or the <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> <code>Lean 4: Infoview: Display Goal</code> command or the key that is bound to the command, which is <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Enter</kbd> by default.
You can also disable auto-opening behavior using the setting <code>lean4.infoViewAutoOpen</code> described below.</p>
<p dir="auto">(2) through (6):</p>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/quotes.png"><img src="vscode-lean4/media/quotes.png" alt="quotes" style="max-width: 100%;"></a></td>
<td>Copy the contents of the widget to a comment in the active text editor.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/pin.png"><img src="vscode-lean4/media/pin.png" alt="pin" style="max-width: 100%;"></a></td>
<td>Split off a "pinned" tactic state widget, which tracks the tactic state at a fixed position, even if you move your cursor away.  When pinned you will see the unpin and reveal file location icons appear.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/unpin.png"><img src="vscode-lean4/media/unpin.png" alt="unpin" style="max-width: 100%;"></a></td>
<td>Remove a pinned widget from the Infoview.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/reveal-file-location.png"><img src="vscode-lean4/media/reveal-file-location.png" alt="reveal" style="max-width: 100%;"></a></td>
<td>Move the cursor in the editor to the pinned location in the file.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/pause.png"><img src="vscode-lean4/media/pause.png" alt="pause" style="max-width: 100%;"></a></td>
<td>Prevent the tactic state widget from updating when the file is edited. When paused you will see the following addition icons show up.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/continue.png"><img src="vscode-lean4/media/continue.png" alt="continue" style="max-width: 100%;"></a></td>
<td>Once paused you can then click this icon to resume updates.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/update.png"><img src="vscode-lean4/media/update.png" alt="update" style="max-width: 100%;"></a></td>
<td>Refresh the tactic state of the pinned widget.</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/sort.png"><img src="vscode-lean4/media/sort.png" alt="sort" style="max-width: 100%;"></a></td>
<td>Reverse the order of the lists under Tactic State.</td>
</tr>
</tbody>
</table>
<p dir="auto">(7). Types in the context can be examined in the tactic state widget using mouse hover:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/inspect-term-example.png"><img src="vscode-lean4/media/inspect-term-example.png" alt="inspect-term-example" style="max-width: 100%;"></a></p>
<p dir="auto">(8). The "All Messages" widget can be expanded by clicking on it (or hitting the keybind for <code>lean4.displayList</code>, which is <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Alt</kbd> by default</p>
<h2 dir="auto"><a id="user-content-extension-settings" class="anchor" aria-hidden="true" href="#extension-settings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension Settings</h2>
<p dir="auto">This extension contributes the following settings (for a complete list, open the VS Code Settings and type <code>Lean4</code> in the search box):</p>
<h3 dir="auto"><a id="user-content-server-settings" class="anchor" aria-hidden="true" href="#server-settings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Server settings</h3>
<ul dir="auto">
<li>
<p dir="auto"><code>lean4.toolchainPath</code>: specifies the location  of the Lean toolchain to be used when starting the Lean language server. Most users (i.e. those using <code>elan</code>) should not ever need to change this. If you are bundling Lean and <code>vscode-lean</code> with <a href="https://code.visualstudio.com/docs/editor/portable" rel="nofollow">Portable mode VS Code</a>, you might find it useful to specify a relative path to Lean. This can be done by starting this setting string with <code>%extensionPath%</code>; the extension will replace this with the absolute path of the extension folder. For example, with the default directory setup in Portable mode, <code>%extensionPath%/../../../lean</code> will point to <code>lean</code> in the same folder as the VS Code executable / application.</p>
</li>
<li>
<p dir="auto"><code>lean4.serverEnv</code>: specifies any Environment variables to add to the Lean 4 language server environment.  Note that when opening a <a href="https://code.visualstudio.com/docs/remote/ssh" rel="nofollow">remote folder</a> using VS Code the Lean 4 language server will be running on that remote machine.</p>
</li>
<li>
<p dir="auto"><code>lean4.serverEnvPaths</code>: specifies any additional paths to add to the Lean 4 language server environment PATH variable.</p>
</li>
<li>
<p dir="auto"><code>lean4.serverArgs</code>: specifies any additional arguments to pass on the <code>lean --server</code> command line.</p>
</li>
<li>
<p dir="auto"><code>lean4.serverLogging.enabled</code>: specifies whether to do additional logging of
commands sent to the Lean 4 language server. The default is <code>false</code>.</p>
</li>
<li>
<p dir="auto"><code>lean4.serverLogging.path</code>: if <code>serverLogging.enabled</code> is true this provides the
name of the relative path to the store the logs.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-input--editing-settings" class="anchor" aria-hidden="true" href="#input--editing-settings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Input / editing settings</h3>
<ul dir="auto">
<li>
<p dir="auto"><code>lean4.input.enabled</code>: enables abbreviation input completion mode.  For example, it allows  you to type <code>\alpha</code> and have that be replaced with the greek letter (α).</p>
</li>
<li>
<p dir="auto"><code>lean4.input.eagerReplacementEnabled</code>: enables/disables eager replacement as soon as the abbreviation is unique (<code>true</code> by default)</p>
</li>
<li>
<p dir="auto"><code>lean4.input.leader</code>: character to type to trigger abbreviation input completion input mode (<code>\</code> by default).</p>
</li>
<li>
<p dir="auto"><code>lean4.input.languages</code>: specifies which VS Code programming languages the abbreviation input completion will be used in.  The default is [<code>lean4</code>, <code>lean</code>].</p>
</li>
<li>
<p dir="auto"><code>lean4.input.customTranslations</code>: add additional input Unicode translations. Example: <code>{"foo": "☺"}</code> will correct <code>\foo</code> to <code>☺</code> (assuming the <code>lean.input.leader</code> has its default value <code>\</code>).</p>
</li>
<li>
<p dir="auto"><code>lean4.typesInCompletionList</code>: controls whether the types of all items in the list of completions are displayed. By default, only the type of the highlighted item is shown.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-infoview-settings" class="anchor" aria-hidden="true" href="#infoview-settings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Infoview settings</h3>
<ul dir="auto">
<li>
<p dir="auto"><code>lean4.infoViewAutoOpen</code>: controls whether the Infoview is automatically displayed when the Lean extension is activated for the first time in a given VS Code workspace(<code>true</code> by default).  If you manually close the Infoview it will stay closed for that workspace until.  You can then open it again using the <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> <code>Lean 4: Infoview: Display Goal</code> command.</p>
</li>
<li>
<p dir="auto"><code>lean4.infoViewAutoOpenShowGoal</code>: auto open shows goal and messages for the current line (instead of all messages for the whole file).  In this mode the Infoview updates often every time you move the cursor to a different position so it can show context sensitive information.  Default is <code>true</code>.</p>
</li>
<li>
<p dir="auto"><code>lean4.infoViewAllErrorsOnLine</code>: show all errors on the current line, instead of just the ones on the right of the cursor, default <code>true</code>.</p>
</li>
<li>
<p dir="auto"><code>lean4.elaborationDelay</code>: Time (in milliseconds) which must pass since latest edit until elaboration begins. Lower values may make editing feel faster at the cost of higher CPU usage.  The default is 200.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-extension-commands" class="anchor" aria-hidden="true" href="#extension-commands"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extension commands</h2>
<p dir="auto">This extension also contributes the following commands, which can be bound to keys if desired using the <a href="https://code.visualstudio.com/docs/getstarted/keybindings" rel="nofollow">VS Code keyboard bindings</a>.</p>
<p dir="auto">The format below is: "<code>lean4.commandName</code> (command name): description", where <code>lean.commandName</code> represents the name used in <code>settings.json</code> and "command name" is the name found in the <a href="https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette" rel="nofollow">command palette</a> (accessed by hitting <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd>).</p>
<h3 dir="auto"><a id="user-content-server-commands" class="anchor" aria-hidden="true" href="#server-commands"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Server commands</h3>
<ul dir="auto">
<li>
<p dir="auto"><code>lean4.restartServer</code> (Lean 4: Restart Server): restart the Lean 4 Language Server. Useful if the server crashes or if you built new <code>.olean</code> files in your workspace.</p>
</li>
<li>
<p dir="auto"><code>lean4.refreshFileDependencies</code> (Lean 4: Refresh File Dependencies): This command is a work around for the fact that full incremental updates do not yet work automatically across files, so after changing and rebuilding the dependency of a
Lean 4 file, the language server needs to be manually informed that it should re-elaborate the full file, including the
imports. This command has a default keyboard binding of <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>X</kbd>.</p>
</li>
<li>
<p dir="auto"><code>lean4.selectToolchain</code> (Lean 4: Select Lean Toolchain) Select version of the Lean toolchain to use for the current workspace.  This shows the list of available toolchains returned from <code>elan toolchain list</code> and allows you to easily switch. The Lean 4 language server will automatically be restarted using the selected toolchain.  This command also provides a choice labelled <code>Other...</code> where you can enter the full path to a Lean 4 toolchain to use instead.  This choice is remembered in your <a href="https://code.visualstudio.com/docs/getstarted/settings" rel="nofollow">Workspace Settings</a> and you can reset any custom choice by selecting <code>Reset workspace override...</code> from the list (if it is shown).</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/select-toolchain.png"><img src="vscode-lean4/media/select-toolchain.png" alt="select-toolchain" style="max-width: 100%;"></a></p>
<p dir="auto">You can test the latest <a href="https://github.com/leanprover/lean4">Lean 4 master branch</a> with this VS Code extension.  First you build Lean, then run the following commands:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="cd &lt;lean4-repo&gt;
elan toolchain link master ./build/release/stage1"><pre class="notranslate"><code>cd &lt;lean4-repo&gt;
elan toolchain link master ./build/release/stage1
</code></pre></div>
<p dir="auto">Now the <code>Lean4: Select Toolchain</code> will show <code>master</code> as one of the toolchains you can select.
You will then see a prompt to restart the Lean Language Server and if you click <code>Restart Lean</code>, the
server will be restarted automatically using the your brand new locally built version of Lean.
This is useful if you are adding features to Lean 4 that you want to test in the VS Code
extension before an official Lean4 nightly build is published.</p>
<p dir="auto">Alternatively, you can use the <code>Other...</code> option and just provide the full path containing
your build output at <code>.../build/release/stage1/</code>.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-editing-commands" class="anchor" aria-hidden="true" href="#editing-commands"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Editing commands</h3>
<ul dir="auto">
<li><code>lean4.input.convert</code> (Lean 4: Input: Convert Current Abbreviation): converts the current abbreviation (bound to <kbd>tab</kbd> by default)</li>
</ul>
<h3 dir="auto"><a id="user-content-infoview-commands" class="anchor" aria-hidden="true" href="#infoview-commands"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Infoview commands</h3>
<ul dir="auto">
<li>
<p dir="auto"><code>lean4.displayGoal</code> (Lean 4: Infoview: Display Goal): open the Infoview panel (bound to <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>Enter</kbd> by default)</p>
</li>
<li>
<p dir="auto"><code>lean4.displayList</code> (Lean 4: Infoview: Toggle "All Messages"): toggles the "All messages" widget in the Infoview (bound to <kbd>ctrl</kbd>+<kbd>alt</kbd>+<kbd>shift</kbd>+<kbd>enter</kbd> by default)</p>
</li>
<li>
<p dir="auto"><code>lean4.infoView.copyToComment</code> (Lean 4: Infoview: Copy Contents to Comment"): if there is a valid value in the Infoview marked with the <a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/quotes.png"><img height="16" src="vscode-lean4/media/quotes.png" style="max-width: 100%;"></a> icon that can be copied to a comment, this command invokes that action in the editor.</p>
</li>
<li>
<p dir="auto"><code>lean4.infoView.toggleStickyPosition</code> (Lean 4: Infoview: Toggle Pin): enable / disable "sticky" mode. On enable, a tactic state widget will be created and pinned to this position, reporting the goal from this point even as the cursor moves and edits are made to the file. On disable the pinned widget will be removed. (same as clicking on the <a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/pin.png"><img height="16" src="vscode-lean4/media/pin.png" style="max-width: 100%;"></a> or <a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/unpin.png"><img height="16" src="vscode-lean4/media/unpin.png" style="max-width: 100%;"></a> icon on the tactic state widget closest to the cursor.)</p>
</li>
<li>
<p dir="auto"><code>lean4.infoView.toggleUpdating</code> (Lean 4: Infoview: Toggle Updating): pause / continue live updates of the main (unpinned) tactic state widget (same as clicking on the <a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/pause.png"><img height="16" src="vscode-lean4/media/pause.png" style="max-width: 100%;"></a> or <a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/continue.png"><img height="16" src="vscode-lean4/media/continue.png" style="max-width: 100%;"></a> icon on the main tactic state widget.)</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-documentation-commands" class="anchor" aria-hidden="true" href="#documentation-commands"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation commands</h3>
<ul dir="auto">
<li>
<p dir="auto"><code>lean4.docView.open</code> (Lean 4: Open Documentation View): Open documentation found in local 'html' folder in a separate web view panel.</p>
</li>
<li>
<p dir="auto"><code>lean4.docView.showAllAbbreviations</code> (Lean 4: Show all abbreviations): Show help page containing all abbreviations and the Unicode characters they map to.  This makes it easy to then search for the abbreviation for a given symbol you have in mind using <kbd>Ctrl</kbd>+<kbd>F</kbd>.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-complete-setup" class="anchor" aria-hidden="true" href="#complete-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Complete Setup</h2>
<p dir="auto">The complete flow chart for determining how elan and lean are installed is shown below:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="vscode-lean4/media/setup.png"><img src="vscode-lean4/media/setup.png" alt="flow" style="max-width: 100%;"></a></p>
<p dir="auto">The <code>start</code> state is when you have opened a folder in VS Code and opened a .lean file to activate this extension.</p>
<p dir="auto">If the extension finds that elan is not in your path and is not installed in the default location then it will prompt
you to install lean via elan.  If the folder contains a <code>lean-toolchain</code> version it will install that version
otherwise it will install <code>leanprover/lean4:nightly</code>.</p>
<p dir="auto">If elan is installed and there is a workspace override in place created by the <code>Select Toolchain</code>
command then this version takes precedence until you remove that override.</p>
<p dir="auto">Otherwise, if there is a <code>lean-toolchain</code> (or <code>leanpkg.toml</code>) in the workspace folder or in a parent
folder then it will use the version specified in the specified version.</p>
<p dir="auto">Otherwise, if <code>elan toolchain list</code> shows there is a <code>(default)</code> toolchain it will use that version.</p>
<p dir="auto">Otherwise, it will prompt you to select a toolchain using the <code>Select Toolchain</code> command.  If the
elan toolchain list is empty it will add <code>leanprover/lean4:nightly</code> to the list so that there is
always something to select.</p>
<p dir="auto">Then with the selected version it runs <code>lean --version</code> to check if that version is installed yet.
If this version is not yet installed <code>lean --version</code> will install it.</p>
<p dir="auto">In the case of a workspace override the <code>+version</code> command line option is used on <code>lean --version</code>
and <code>lean --server</code> to ensure that the overridden version is used.</p>
<h2 dir="auto"><a id="user-content-for-vscode-extension-developers" class="anchor" aria-hidden="true" href="#for-vscode-extension-developers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For VSCode extension developers</h2>
<p dir="auto">See <a href="docs/dev.md">Development</a>.</p>
</article></div></main>
</body>
</html>