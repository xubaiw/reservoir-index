<html>
<head>
<meta charset="utf-8"></meta><title>arthurpaulino/LeanMySQL</title>
<link rel="stylesheet" href="./static/style.css"></link></head>
<body>
<header>
<h1>
<a href="./">Reservoir</a>
</h1>
<input placeholder="Text in here to navigate!"></input><ul>
<li>
<a href="#">About</a>
</li>
<li>
<a href="#">New</a>
</li>
<li>
<a href="#">Trending</a>
</li>
</ul>
</header>
<main>
<h1>arthurpaulino/LeanMySQL</h1>
<p>A MySQL API for Lean 4</p>
<a href="https://github.com/arthurpaulino/LeanMySQL">GitHub Link</a>
<a href="#" title="Missing now!">Documentation</a>
<h2>Pick a version!</h2>
<p>TODO: should show a time axes that allows the users to view, filter and click copy the lakefile config.</p>
<h2>README</h2>
<div class="md" data-path="README.md" id="readme"><article class="markdown-body entry-content container-lg" itemprop="text"><h3 data-sourcepos="1:1-1:11" dir="auto">LeanMySQL</h3>
<p data-sourcepos="3:1-3:59" dir="auto">This Lean 4 package provides an API for the MySQL database.</p>
<p data-sourcepos="5:1-5:14" dir="auto">Usage example:</p>
<div class="highlight highlight-source-lean position-relative overflow-auto" data-snippet-clipboard-copy-content="import LeanMySQL

def main : IO Unit := do
  let mysql ← MySQL.mk
  IO.println $ mysql.version
  mysql.login "localhost" "root" "root"
  mysql.createDB "test_db"
  mysql.useDB "test_db"

  mysql.createTable "job" [
    ("id", "INT PRIMARY KEY"),
    ("job_name", "VARCHAR(255)")
  ]
  mysql.insertIntoTable "job" [1, "Computer Scientist"]
  mysql.insertIntoTable "job" [2, "Mathematician"]

  mysql.createTable "person" [
      ("id", "INT PRIMARY KEY"),
      ("name", "VARCHAR(255)"),
      ("age", "INT"),
      ("height", "FLOAT"),
      ("job_id", "INT"),
      ("country_id", "INT")
    ]
  mysql.insertIntoTable "person" [1, "Alice", 20, 1.72, 1, 1]
  mysql.insertIntoTable "person" [2, "Bob", 21, 1.64, 2, 3]
  mysql.insertIntoTable "person" [3, "Craig", 22, 1.76, NULL, 2]

  let df ← mysql.query $
    SELECT name, age, height, job_name
    FROM person LEFT JOIN job ON person.job_id = job.id
    WHERE person.age > 20

  IO.println $ df

  mysql.close"><pre><span class="pl-k">import</span> LeanMySQL

<span class="pl-k">def</span> <span class="pl-en">main</span> : IO Unit := <span class="pl-k">do</span>
  <span class="pl-k">let</span> mysql ← MySQL.mk
  IO.println $ mysql.version
  mysql.login <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>root<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>root<span class="pl-pds">"</span></span>
  mysql.createDB <span class="pl-s"><span class="pl-pds">"</span>test_db<span class="pl-pds">"</span></span>
  mysql.useDB <span class="pl-s"><span class="pl-pds">"</span>test_db<span class="pl-pds">"</span></span>

  mysql.createTable <span class="pl-s"><span class="pl-pds">"</span>job<span class="pl-pds">"</span></span> [
    (<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>INT PRIMARY KEY<span class="pl-pds">"</span></span>),
    (<span class="pl-s"><span class="pl-pds">"</span>job_name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>VARCHAR(255)<span class="pl-pds">"</span></span>)
  ]
  mysql.insertIntoTable <span class="pl-s"><span class="pl-pds">"</span>job<span class="pl-pds">"</span></span> [<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>Computer Scientist<span class="pl-pds">"</span></span>]
  mysql.insertIntoTable <span class="pl-s"><span class="pl-pds">"</span>job<span class="pl-pds">"</span></span> [<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>Mathematician<span class="pl-pds">"</span></span>]

  mysql.createTable <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> [
      (<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>INT PRIMARY KEY<span class="pl-pds">"</span></span>),
      (<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>VARCHAR(255)<span class="pl-pds">"</span></span>),
      (<span class="pl-s"><span class="pl-pds">"</span>age<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>INT<span class="pl-pds">"</span></span>),
      (<span class="pl-s"><span class="pl-pds">"</span>height<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>FLOAT<span class="pl-pds">"</span></span>),
      (<span class="pl-s"><span class="pl-pds">"</span>job_id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>INT<span class="pl-pds">"</span></span>),
      (<span class="pl-s"><span class="pl-pds">"</span>country_id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>INT<span class="pl-pds">"</span></span>)
    ]
  mysql.insertIntoTable <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> [<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>Alice<span class="pl-pds">"</span></span>, <span class="pl-c1">20</span>, <span class="pl-c1">1</span>.<span class="pl-c1">72</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>]
  mysql.insertIntoTable <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> [<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>Bob<span class="pl-pds">"</span></span>, <span class="pl-c1">21</span>, <span class="pl-c1">1</span>.<span class="pl-c1">64</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>]
  mysql.insertIntoTable <span class="pl-s"><span class="pl-pds">"</span>person<span class="pl-pds">"</span></span> [<span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">"</span>Craig<span class="pl-pds">"</span></span>, <span class="pl-c1">22</span>, <span class="pl-c1">1</span>.<span class="pl-c1">76</span>, NULL, <span class="pl-c1">2</span>]

  <span class="pl-k">let</span> df ← mysql.query $
    SELECT name, age, height, job_name
    FROM person LEFT JOIN job ON person.job_id = job.id
    WHERE person.age > <span class="pl-c1">20</span>

  IO.println $ df

  mysql.close</pre></div>
<p data-sourcepos="46:1-46:29" dir="auto">The example above prints out:</p>
<div class="snippet-clipboard-content position-relative overflow-auto" data-snippet-clipboard-copy-content="8.0.28
|   name|age|height|       job_name|
|-------|---|------|---------------|
|  'Bob'| 21|  1.64|'Mathematician'|
|'Craig'| 22|  1.76|           NULL|"><pre class="notranslate"><code class="notranslate">8.0.28
|   name|age|height|       job_name|
|-------|---|------|---------------|
|  'Bob'| 21|  1.64|'Mathematician'|
|'Craig'| 22|  1.76|           NULL|
</code></pre></div>
<h4 data-sourcepos="56:1-56:15" dir="auto">What's next?</h4>
<ul data-sourcepos="58:1-60:0" dir="auto">
<li data-sourcepos="58:1-58:53">Allow queries on the <code>FROM</code> clause (nested queries)</li>
<li data-sourcepos="59:1-60:0">Expand the implicit join so it can accept multiple sources, not just two</li>
</ul>
<p data-sourcepos="61:1-61:27" dir="auto">Feel free to contribute! :D</p>
</article></div></main>
</body>
</html>